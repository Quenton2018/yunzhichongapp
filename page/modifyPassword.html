<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="misapplication-tap-highlight" content="no"/>
		<meta name="HandheldFriendly" content="true"/>
		<meta name="MobileOptimized" content="320"/>
		<title>修改密码</title>
		<link rel="stylesheet" href="../css/iconfont.css">
		<link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8"/>
		<link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" charset="utf-8"/>
		<link rel="stylesheet" href="../plugins/layer/theme/default/layer.css" type="text/css" charset="utf-8"/>
		<script src="../js/jquery-3.3.1.min.js"></script>
		<script src="../js/bootstrap.min.js"></script>
		<script src="../plugins/layer/layer.js"></script>
		<script src="../js/common.js"></script>
		<script src="../js/base.js"></script>
		
		<style type="text/css">

			.pageBigTitle{
				float: right;
				line-height: inherit;
				margin-left: 20px;
			}
			.textBox .inputBox{
				position: relative; 
				background: #fff;
				overflow: hidden;
				margin-bottom: 10px;
			}
			.textBox input{
				-webkit-user-select:text;
				text-align:left;
				border: 0px;
				border-radius: 0.5rem;
				font-size:16px;
				width:100%;
				outline:none;
				line-height: 2.5rem;
				padding-left: 10px;
				margin: 0.3rem;
			}
			.textBox input:focus{
				outline: none;
			}

			.Button-Img{
				width: 80%;
				display: block;
				margin: 0 auto;
			}
			.forgetPassword{
				text-align: right;
				/* margin: 2rem; */
				margin-top: 10px;
				/* margin-bottom: 20px; */
				color: #E76C2B;
				width: 90%;
			}
		</style>
	</head>
	<body style="background-color:#EDEDED;" >
		<header id="header2">
			<div class="headInner">
				<div class="left" id="back"  onclick="back()" >
					<img src="../img/app_back.png" />
					<h1 class="pageBigTitle">修改密码</h1>
				</div>
				<div class="right">&nbsp;</div>
				<div style="clear: both"></div>
			</div>
		</header>

		<div class="my-Content" style="padding-top: 80px">
			<div class="textBox">
				<div class="inputBox">
					<input type="text" name="oldePassword" placeholder="当前密码" />
				</div>
				<div class="inputBox">
					<input type="password" name="newPassword" placeholder="新密码" />
				</div>
				<div class="inputBox">
					<input type="password" name="newPassword2" placeholder="确认密码" />
				</div>
			</div>

			<div style="margin-top: 20px">
				<img class="Button-Img modifyBtn"  src="../img/editPs/app_03.png" />
			</div>

			<div class="forgetPassword">
				<span id="../page/forgetPassword.html" onclick="clicked(this.id)">找回密码</span>
			</div>
		</div>

		<script type="application/javascript">


            if(window.plus){
                pagePlusReady();
            }else{
                document.addEventListener('plusready',pagePlusReady,false);
            }

            function pagePlusReady() {
                uploadLoginInfo();
            }
			/**
			 * 修改密码
			 */
			$(".modifyBtn").click(function(){
				var uuid = plus.storage.getItem("uuid");
				var oldePassword = $("input[name='oldePassword']").val();
				if(!vaildeParam(oldePassword)){
					layer.msg("当前密码");
					return;
				}
				var newPassword = $("input[name='newPassword']").val();
				if(!vaildeParam(newPassword)){
					layer.msg("新密码不能为空");
					return;
				}
				var newPassword2 = $("input[name='newPassword2']").val();
				if(!vaildeParam(newPassword2)){
					layer.msg("确认密码不能为空");
					return;
				}
                if(newPassword.length<6){
                    layer.msg("密码长度不少于6位");
                    return;
                }
                if(newPassword2.length<6){
                    layer.msg("密码长度不少于6位");
                    return;
                }
				if(newPassword != newPassword2){
					layer.msg("两次密码输入不一致");
					return;
				}
				var postData = {
					"oldePassword":oldePassword,
					"newPassword":newPassword,
					"uuid":uuid
				}
				postJSON(API_URL.APIMemberModifyPassword,postData,function(res){
					if("0" == res.code){
						layer.msg("修改成功，正在跳转...");
						setLoginData(res.data.uuid,res.data.mobile);
						setTimeout(function(){
							clicked('../index.html')
						},2000);
					}else{
						layer.msg(res.msg);
					}
				})
				
			})
		</script>
		
	</body>


</html>
